<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Personal - Frontend</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>📝 Mi Blog Personal</h1>
            <p>Frontend para consumir la API del blog - 100% Local</p>
        </header>

        <!-- Sección de Autenticación -->
        <section id="auth-section" class="section">
            <h2>🔐 Autenticación</h2>
            <div class="auth-forms">
                <div class="form-container">
                    <h3>Registrarse</h3>
                    <form id="register-form">
                        <input type="text" id="register-name" placeholder="Nombre completo" required>
                        <input type="email" id="register-email" placeholder="Email" required>
                        <input type="password" id="register-password" placeholder="Contraseña" required>
                        <button type="submit">📝 Registrarse</button>
                    </form>
                </div>
                
                <div class="form-container">
                    <h3>Iniciar Sesión</h3>
                    <form id="login-form">
                        <input type="email" id="login-email" placeholder="Email" required>
                        <input type="password" id="login-password" placeholder="Contraseña" required>
                        <button type="submit">🔑 Iniciar Sesión</button>
                    </form>
                </div>
            </div>
            <div id="auth-status" class="status"></div>
        </section>

        <!-- Sección de Posts (visible solo cuando estás autenticado) -->
        <section id="posts-section" class="section" style="display: none;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h2 style="margin: 0;">📄 Mis Posts</h2>
                <button onclick="logout()" style="background: #6c757d;">🚪 Cerrar Sesión</button>
            </div>

            <!-- Formulario de Edición (oculto inicialmente) -->
            <div id="edit-post-section" class="form-container" style="display: none; border: 2px solid #3498db;">
                <h3>✏️ Editando Post</h3>
                <form id="edit-post-form">
                    <input type="hidden" id="edit-post-id">
                    <input type="text" id="edit-post-title" placeholder="Título del post" required>
                    
                    <!-- Editor enriquecido -->
                    <div class="editor-toolbar">
                        <button type="button" onclick="formatText('bold')" title="Negrita"><strong>B</strong></button>
                        <button type="button" onclick="formatText('italic')" title="Cursiva"><em>I</em></button>
                        <button type="button" onclick="formatText('underline')" title="Subrayado"><u>U</u></button>
                        <button type="button" onclick="formatText('insertUnorderedList')" title="Lista con viñetas">• Lista</button>
                        <button type="button" onclick="formatText('insertOrderedList')" title="Lista numerada">1. Lista</button>
                        <select onchange="changeFontSize(this.value)" title="Tamaño de fuente">
                            <option value="">Tamaño</option>
                            <option value="1">Pequeño</option>
                            <option value="3">Normal</option>
                            <option value="5">Grande</option>
                            <option value="7">Muy Grande</option>
                        </select>
                        <select onchange="changeFontFamily(this.value)" title="Familia de fuente">
                            <option value="">Fuente</option>
                            <option value="Arial, sans-serif">Arial</option>
                            <option value="Georgia, serif">Georgia</option>
                            <option value="'Times New Roman', serif">Times New Roman</option>
                            <option value="'Courier New', monospace">Courier New</option>
                        </select>
                        <button type="button" onclick="insertImage()" title="Insertar imagen">🖼️ Imagen</button>
                        <button type="button" onclick="formatText('removeFormat')" title="Limpiar formato">🧹 Limpiar</button>
                    </div>
                    
                    <div id="edit-post-content" contenteditable="true" class="rich-editor" placeholder="Escribe el contenido de tu post aquí..."></div>
                    
                    <div style="margin-top: 15px; display: flex; gap: 10px;">
                        <button type="submit">✅ Guardar Cambios</button>
                        <button type="button" onclick="cancelEdit()" style="background: #6c757d;">❌ Cancelar Edición</button>
                    </div>
                </form>
            </div>

            <!-- Formulario para Crear Nuevo Post -->
            <div id="create-post-container" class="form-container">
                <h3>📝 Crear Nuevo Post</h3>
                <form id="create-post-form">
                    <input type="text" id="post-title" placeholder="Título del post" required>
                    <textarea id="post-content" placeholder="Contenido del post (puedes usar formato básico)" required></textarea>
                    <button type="submit">📤 Publicar Post</button>
                </form>
            </div>

            <!-- Lista de Posts -->
            <div class="posts-container">
                <h3>📚 Todos los Posts</h3>
                <div id="posts-list" class="posts-list">
                    <p>Cargando posts...</p>
                </div>
            </div>
        </section>

        <!-- Administración del Sistema -->
        <section class="section">
            <h2>⚙️ Administración del Sistema</h2>
            <div style="display: flex; gap: 10px; align-items: center; flex-wrap: wrap;">
                <button onclick="checkHealth()">🩺 Verificar Estado</button>
                <button onclick="resetCompleteSystem()" style="background: #dc3545;">
                    🔄 Limpiar Datos Locales y Base de Datos
                </button>
            </div>
            <div id="health-status" class="status" style="margin-top: 15px;"></div>
        </section>

        <!-- Información del Usuario -->
        <section id="user-info-section" class="section" style="display: none;">
            <h2>👤 Información del Usuario</h2>
            <div id="user-info" class="status info">
                <p><strong>ID:</strong> <span id="user-id">-</span></p>
                <p><strong>Nombre:</strong> <span id="user-name">-</span></p>
                <p><strong>Email:</strong> <span id="user-email">-</span></p>
                <p><strong>Registrado:</strong> <span id="user-created">-</span></p>
            </div>
        </section>
    </div>

    <script src="app.js"></script>
</body>
</html>